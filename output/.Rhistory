geom_line(aes(y = pred))
d +
geom_point(aes(colour = carat)) +
geom_smooth()
d +
geom_point(aes(colour = carat)) +
geom_smooth(method="lm")
d +
geom_point(aes(colour = carat)) +
geom_smooth(method="gam")
d + ggtitle("Some Sleep Data")
d + ggtitle("Some plot")
d + facet_wrap(aes(colour = cut))
d + facet_wrap(~ cut)
names(diamonds)
head(diamonds)
d + facet_grid(color~ cut)
d + geom_lines()
d + geom_line()
d + geom_line(aes(y=price))
e <- ggplot(aex(clarity, price))
e <- ggplot(diamonds,aes(clarity, price))
e
e <- ggplot(diamonds)+
geom_line(aes(clarity, price))
e <- ggplot(diamonds)+
geom_line(aes(x=clarity, y=price))
e <- ggplot(diamonds)+
geom_line(mapping=aes(x=clarity, y=price))
e <- ggplot(diamonds)+
geom_line(mapping=aes(x=depth, y=price))
e
e <- ggplot(diamonds)+
geom_line(mapping=aes(x, y))
e
e <- ggplot(diamonds)+
geom_line(mapping=aes(depth, price))
e
e <- ggplot(diamonds)+
geom_line(mapping=aes(carat, depth))
e
e <- ggplot(diamonds)+
geom_line(mapping=aes(carat, depth))+
geom_smooth()
e
e <- ggplot(diamonds)+
geom_line(mapping=aes(x=carat, y=depth))+
geom_smooth()
e
e <- ggplot(data=diamonds)+
geom_line(mapping=aes(x=carat, y=depth))+
geom_smooth(aes(x=carat, y=depth))
w
e
e <- ggplot(data=diamonds, aes(x=carat, y=depth))+
geom_line(aes(color=carat))+
geom_smooth()
e
getwd()
play_store<-read.table("store.csv",header=T,sep=",")
play_info<-read.table("info.csv",header=T,sep=",")
colnames(play_info)
colnames(play_store)
lookup<-unique(play_store)
lookup
merged <-merge(play_store,play_info,by=c("Store","Date"))
merged
dim(merged)
View(play_store)
View(play_info)
play_info<-read.table("info.csv",header=T,sep=",")
a<-seq(1:nrow(play_info),nrow(play_info))
a<-seq(1:nrow(play_info))
a
a<-sample(1:nrow(play_info),nrow(play_info))
a
dim(play_info)
play_info<-play_infp[a,]
play_info<-play_info[a,]
write.csv(play_info,"info.csv")
play_info<-read.table("info.csv",header=T,sep=",")
colnames(play_info)
colnames(play_store)
head(play_info)
View(head(play_info))
View(play_store)
merged <-merge(play_store,play_info,by=c("Store","Date"))
new_data <- merged[,c("Store","Date","Weekly_Sales","Temperature")]
plot(Weekly_Sales~Temperature, data=new_data,main="Weekly sales at different temperatures")
colnames(play_info)
colnames(play_store)
z <- matrix(c(1:3, "R", "Open", "Lab", pi, sqrt(4),2^3), nrow = 3)
colnames(z) <- c("First", "Second", "Third")
z[, 1] != 1
z[(z[, 1] != 1), 3]
z[1:2,]
play_info[play_info$Store==1,]
is.na(c(3,-7.5, NA, pi))
is.na(3/0)
3/0
is.infinite(3/0)
a<-matrix(c(1:4),nrow=2)
a[2,2]<-NA
is.na(a)
b<-c(1:9,NA)
mean(b)
mean(b,na.rm=TRUE)
colSums(a,na.rm=TRUE)
?na.omit #see the difference between different ways of handling NA
?na.omit #see the difference between different ways of handling NA
?na.omit #see the difference between different ways of handling NA
df <- data.frame(x = c(1, 2, 3), y = c(0, 10, NA))
df
na.omit(df)
rbind(play_store, play_info)
a<-rbind(play_store, merged)
dim(new_data)
dim(merged)
dim(play_store)
m <- cbind(1, 1:7)
m
n <- rbind(1, 1:7)
n
library(dplyr)
left_join(play_store, play_info, by = c("Store","Date"))
merged2<-left_join(play_store, play_info, by = c("Store","Date"))
dim(merged2)
new_data2 <- merged2[,c("Store","Date","Weekly_Sales","Temperature")]
identical(new_data2,new_data)
new_data2
new_data
View(new_data)
View(new_data2)
merged <-merge(play_store,play_info,by=c("Store","Date"))
new_data <- merged[,c("Store","Date","Weekly_Sales","Temperature")]
merged2<-left_join(play_store, play_info, by = c("Store","Date"))
dim(merged2)
new_data2 <- merged2[,c("Store","Date","Weekly_Sales","Temperature")]
identical(new_data2,new_data)
View(new_data2)
View(new_data)
merged2<-inner_join(play_store, play_info, by = c("Store","Date"))
colnames(play_info)
colnames(play_store)
merged <-merge(play_store,play_info,by=c("Store"="Store","Date"="Date"))
new_data <- merged[,c("Store","Date","Weekly_Sales","Temperature")]
merged <-merge(play_store,play_info,by=c("Store","Date"))
new_data <- merged[,c("Store","Date","Weekly_Sales","Temperature")]
plot(Weekly_Sales~Temperature, data=new_data,main="Weekly sales at different temperatures")
merged2<-inner_join(play_store, play_info, by = c("Store"="Store","Date"="Date"))
merged2<-left_join(play_store, play_info, by = c("Store"="Store","Date"="Date"))
levels(play_store$Store)
levels(play_store$Date)
merged2<-left_join(play_store, play_info, by = c("Store"="Store","Date"="Date"))
dim(merged2)
new_data2 <- merged2[,c("Store","Date","Weekly_Sales","Temperature")]
identical(new_data2,new_data)
merged <-merge(play_store,play_info,by=c("Store","Date"))
new_data <- merged[,c("Store","Date","Weekly_Sales","Temperature")]
View(new_data)
View(new_data)
View(new_data2)
View(play_store)
View(play_info)
plot(Weekly_Sales~Temperature, data=new_data2,main="Weekly sales at different temperatures")
identical(new_data2,new_data)
View(play_info)
df <- data.frame(x = c(1, 2, 3), y = c(0, 10, NA))
df
na.omit(df)
na.rm(df)
?na.omit #see the difference between different ways of handling NA
na.pass(df)
na.exclude(df)
na.fail(df)
View(new_data2)
n
## Merge Datasets
play_store<-read.table("store.csv",header=T,sep=",")
play_info<-read.table("info.csv",header=T,sep=",")
colnames(play_info)
colnames(play_store)
View(play_store)
View(head(play_info))
# The rows in the two data frames that match on the specified columns are extracted, and joined together.
merged <-merge(play_store,play_info,by=c("Store","Date"))
new_data <- merged[,c("Store","Date","Weekly_Sales","Temperature")]
plot(Weekly_Sales~Temperature, data=new_data,main="Weekly sales at different temperatures")
# Using dplyr
library(dplyr)
merged2<-left_join(play_store, play_info, by = c("Store"="Store","Date"="Date"))
dim(merged2)
new_data2 <- merged2[,c("Store","Date","Weekly_Sales","Temperature")]
View(new_data2)
good_times<-new_data2[new_data2>20000,]
View(good_times)
names(new_data2)
good_times<-new_data2[new_data2$Weekdly_Sales>20000,]
good_times
good_times<-new_data2[new_data2$Weekly_Sales>20000,]
good_times
plot(good)
good<-new_data2[new_data2$Weekly_Sales>20000,]
plot(good[,3:4])
plot(good[,4],good[,3])
plot(good[,4],good[,3],ytab="Sales",xtab="Temp")
plot(good[,4],good[,3],ylab="Sales",xlab="Temp")
warnings()
plot(good[,4],good[,3],ylab="Sales",xlab="Temp")
play_info[play_info$Store==1,]
store1<-play_info[play_info$Store==1,]
names(store1)
plot(store1$Temperature,store1$Weekly_Sales)
range(store1$Temperature)
plot(store1$Temperature,store1$Weekly_Sales)
play_store<-read.table("store.csv",header=T,sep=",")
rm(list=ls())
m <- cbind(1, 1:7)
m
n <- rbind(1, 1:7)
n
m <- cbind(1:3, 1:7)
m
m <- cbind(2:8, 1:7)
m
play_store<-read.table("store.csv",header=T,sep=",")
play_info<-read.table("info.csv",header=T,sep=",")
colnames(play_info)
colnames(play_store)
View(play_store)
View(head(play_info))
View(play_info)
merged <-merge(play_store,play_info,by=c("Store","Date"))
dim(merged)
new_data <- merged[,c("Store","Date","Weekly_Sales","Temperature")]
plot(Weekly_Sales~Temperature, data=new_data,main="Weekly sales at different temperatures")
library(dplyr)
merged2<-left_join(play_store, play_info, by = c("Store"="Store","Date"="Date"))
dim(merged2)
new_data2 <- merged2[,c("Store","Date","Weekly_Sales","Temperature")]
identical(new_data2,new_data)
View(new_data)
View(new_data2)
View(play_store)
new_data2$Weekly_Sales>20000
good<-new_data2[new_data2$Weekly_Sales>20000,]
good
plot(good[,4],good[,3],ylab="Sales",xlab="Temp")
store1<-play_info[play_info$Store==1,]
View(store1)
v<-NULL
is.na(3/0)
3/0
is.infinite(3/0)
is.na(c(3,-7.5, NA, pi))
is.na(c(3,-7.5, NA, pi))
b<-c(1:9,NA)
b
mean(b)
mean(b,na.rm=TRUE)
sum(b)
sum(b,na.rm)
sum(b,na.rm=T)
?na.omit #see the difference between different ways of handling NA
mean(na.omit(b))
mean(na.pass(b))
mean(na.exclude(b))
mean(na.fail(b))
df <- data.frame(x = c(1, 2, 3), y = c(0, 10, NA))
df
na.omit(df)
require(rCharts)
install.packages("rCharts")
require(rCharts)
require(devtools)
install_github('rCharts', 'ramnathv')
hair_eye_male <- subset(as.data.frame(HairEyeColor), Sex == "Male")
n1 <- nPlot(Freq ~ Hair, group = "Eye", data = hair_eye_male, type = "multiBarChart")
require(rCharts)
hair_eye_male <- subset(as.data.frame(HairEyeColor), Sex == "Male")
n1 <- nPlot(Freq ~ Hair, group = "Eye", data = hair_eye_male, type = "multiBarChart")
n1$print('mychart1', include_assets = TRUE, cdn = TRUE)
require(rCharts)
h1 <- Highcharts$new()
h1$chart(type = "spline")
h1$series(data = c(1, 3, 2, 4, 5, 4, 6, 2, 3, 5, 4, 7), dashStyle = "longdash", name='2011')
h1$series(data = c(NA, 4, 1, 3, 4, 2, 9, 1, 2, 3, 4, 3), dashStyle = "shortdot", name='2012')
h1$series(data = c(4, 6, 7, 8, 6, 2, 9, 4, 3, 6, 7, NA), dashStyle = "longdot", name='2013')
h1$xAxis(categories = 1:12)
h1$legend(symbolWidth = 80)
h1$print('mychart2', include_assets = TRUE, cdn = TRUE)
require(googleVis)
install.packages("googleVis")
require(googleVis)
M <- gvisMotionChart(Fruits, "Fruit", "Year", options=list(width=800, height=410))
print(M, tag='chart')
require(googleVis)
demo(googleVis)
df=data.frame(country=c("US", "GB", "BR"),
val1=c(10,13,14),
val2=c(23,12,32))
Intensity <- gvisIntensityMap(df)
print(M, tag='chart')
rmarkdown::shiny_prerendered_clean('~/Dropbox/data_vis.Rpres')
d <- diamonds[sample(nrow(diamonds), 1000), ]
d <- diamonds[sample(nrow(diamonds), 1000), ]
d <- carat[sample(nrow(diamonds), 1000), ]
stats
diamonds
mtcars %>% ggvis(~wt, ~mpg) %>% layer_points()
install.packages("ggvis")
library(ggvis)
mtcars %>% ggvis(~wt, ~mpg) %>% layer_points()
data(carat)
data(caret)
data(diamonds)
data(diamond)
library(ggplot2)
data(diamonds)
p <- ggplot(data = d, aes(x = carat, y = price)) +
geom_point(aes(text = paste("Clarity:", clarity)), size = 4) +
geom_smooth(aes(colour = cut, fill = cut)) + facet_wrap(~ cut)
diamonds<-d
d<-diamonds
p <- ggplot(data = d, aes(x = carat, y = price)) +
geom_point(aes(text = paste("Clarity:", clarity)), size = 4) +
geom_smooth(aes(colour = cut, fill = cut)) + facet_wrap(~ cut)
(gg <- ggplotly(p))
library(plotly)
p <- ggplot(data = d, aes(x = carat, y = price)) +
geom_point(aes(text = paste("Clarity:", clarity)), size = 4) +
geom_smooth(aes(colour = cut, fill = cut)) + facet_wrap(~ cut)
(gg <- ggplotly(p))
d <- diamonds[sample(nrow(diamonds), 1000), ]
plot_ly(d, x = carat, y = price, text = paste("Clarity: ", clarity), mode = "markers", color = carat, size = carat)
d
names(d)
d <- diamonds[sample(nrow(diamonds), 1000), ]
plot_ly(d, x = carat, y = price, text = paste("Clarity: ", clarity), mode = "markers", color = carat, size = carat)
plot_ly(d, x = carat, y = price, text = paste("Clarity: ", clarity), mode = "markers", color = carat, size = carat)
plot_ly(diamonds, x = carat, y = price, text = paste("Clarity: ", clarity), mode = "markers", color = carat, size = carat)
plot_ly()
plot_ly
plot_ly(d, x = carat, y = price, text = paste("Clarity: ", clarity), mode = "markers", color = carat, size = carat)
p <- plot_ly(iris, x = ~Sepal.Width, y = ~Sepal.Length)
plot_ly(iris, x = ~Sepal.Width, y = ~Sepal.Length)
plot_ly(d, x = ~carat, y = ~price, text = paste("Clarity: ", clarity), mode = "markers", color = carat, size = carat)
plot_ly(d, x = ~carat, y = ~price, text = paste("Clarity: ", ~clarity), mode = "markers", color = ~carat, size = ~carat)
d$clarity
dim(d)
d <- diamonds[sample(nrow(diamonds), 1000), ]
dim(d)
names(d)
plot_ly(d, x = ~carat, y = ~price, text = paste("Clarity: ", ~clarity), mode = "markers", color = ~carat, size = ~carat)
dim(d$clarity)
length(d$clarity)
i <-iris[sample(nrow(iris),1000),]
i <-iris[sample(nrow(iris),200),]
dim(iris)
i <-iris[sample(nrow(iris),50),]
plot_ly(i, x = ~Sepal.Width, y = ~Sepal.Length)
dim(diamonds)
plot_ly(d, x = ~carat, y = ~price, mode = "markers", color = ~carat, size = ~carat)
plot_ly(d, x = ~carat, y = ~price, text = ~clarity, mode = "markers", color = ~carat, size = ~carat)
plot_ly(d, x = ~carat, y = ~price, text = paste("Clarity:",~clarity), mode = "markers", color = ~carat, size = ~carat)
length(paste("Clarity:",d$clarity))
plot_ly(d, x = ~carat, y = ~price, text = paste("Clarity:",d$clarity), mode = "markers", color = ~carat, size = ~carat)
plot_ly(d, x = ~carat, y = ~price, text = paste("Clarity:",clarity), mode = "markers", color = ~carat, size = ~carat)
plot_ly(d, x = ~carat, y = ~price, color = ~carat,
size = ~carat, text = ~paste("Clarity: ", clarity))
dat <- map_data("world", "canada") %>% group_by(group)
p <- plot_mapbox(dat, x = ~long, y = ~lat) %>%
add_paths(size = I(2)) %>%
add_segments(x = -100, xend = -50, y = 50, 75) %>%
layout(mapbox = list(zoom = 0,
center = list(lat = ~median(lat),
lon = ~median(long))
))
https://www.mapbox.com/help/create-api-access-token/
install.packages("quantmod")
library("topicmodels")
dtm<-dtm_list[[1]][[2]]
load("..output/dtm_list")
setwd("/Users/yuejin/Dropbox/Courseworks/ADS/proj4/Spr2017-proj4-team8/output")
load("../output/dtm_list")
load("dtm_list")
load(dtm_list)
load("../output/dtm_list.RData")
dtm<-dtm_list[[1]][[2]]
# LDA parameters
burnin <- 4000
iter <- 1000
thin <- 200
seed <-list(2003,2,68,100001,765)
nstart <- 5
best <- TRUE
delta=0.1
alpha<-50/k
# number of topics
k <- 10
theta_list<-list(name=NULL,theta=NULL)
phi_list<-list(name=NULL,phi=NULL)
for (i in 1:length(query.list)){
dtm<-dtm_list[[i]][[2]]
rowTotals <- apply(dtm , 1, sum)
dtm  <- dtm[rowTotals> 0, ]
# Run LDA using Gibbs sampling
ldaOut <-LDA(dtm, k, method="Gibbs",  control=list(nstart=nstart,
seed = seed,
best=best,
burnin = burnin,
alpha=alpha,
delta=delta,
iter=iter,
thin=thin))
# theta_dj;
# Probabilities associated with each topic assignment for each record
theta <- as.data.frame(ldaOut@gamma)
# phi_mj
# the probability of using word m in topic j
phi <- posterior(ldaOut)$terms
temp1<-list(name=query.list[i], theta=theta)
theta_list[[i]]<- temp1
temp2<-list(query.list[i], phi)
phi_list[[i]] <- temp2
}
load("../output/cleanedPapers.RData")
data.lib="../data/nameset"
data.files=list.files(path=data.lib, "*.txt")
# data.files
## remove "*.txt"
query.list=substring(data.files,
1, nchar(data.files)-4)
for (i in 1:length(query.list)){
dtm<-dtm_list[[i]][[2]]
rowTotals <- apply(dtm , 1, sum)
dtm  <- dtm[rowTotals> 0, ]
# Run LDA using Gibbs sampling
ldaOut <-LDA(dtm, k, method="Gibbs",  control=list(nstart=nstart,
seed = seed,
best=best,
burnin = burnin,
alpha=alpha,
delta=delta,
iter=iter,
thin=thin))
# theta_dj;
# Probabilities associated with each topic assignment for each record
theta <- as.data.frame(ldaOut@gamma)
# phi_mj
# the probability of using word m in topic j
phi <- posterior(ldaOut)$terms
temp1<-list(name=query.list[i], theta=theta)
theta_list[[i]]<- temp1
temp2<-list(query.list[i], phi)
phi_list[[i]] <- temp2
}
alpha<-50/k
for (i in 1:length(query.list)){
dtm<-dtm_list[[i]][[2]]
rowTotals <- apply(dtm , 1, sum)
dtm  <- dtm[rowTotals> 0, ]
# Run LDA using Gibbs sampling
ldaOut <-LDA(dtm, k, method="Gibbs",  control=list(nstart=nstart,
seed = seed,
best=best,
burnin = burnin,
alpha=alpha,
delta=delta,
iter=iter,
thin=thin))
# theta_dj;
# Probabilities associated with each topic assignment for each record
theta <- as.data.frame(ldaOut@gamma)
# phi_mj
# the probability of using word m in topic j
phi <- posterior(ldaOut)$terms
temp1<-list(name=query.list[i], theta=theta)
theta_list[[i]]<- temp1
temp2<-list(query.list[i], phi)
phi_list[[i]] <- temp2
}
phi_list[[1]]
phi_list[[1]][[1]]
dtm_list[[1]]
names(dtm_list[[1]])
names(dtm_list)
names(dtm_list[[1]])
names(dtm_list[[2]])
save(theta,file="../output/theta.RData")
save(phi,file="../output/phi.RData")
load("../output/dtm_list_combined.RData")
dtm<-dtm_combined[[1]][[2]]
dtm_combined<-dtm_list_combined[[1]][[2]]
dtm_combined<-dtm_list_combined
rowTotals <- apply(dtm , 1, sum)
dtm_combined<-dtm_list_combined
rowTotals <- apply(dtm_combined , 1, sum)
dtm_combined  <- dtm_combined[rowTotals> 0, ]
ldaOut_combined <-
LDA(dtm_combined, k, method="Gibbs", control=list(nstart=nstart,
seed = seed,
best=best,
burnin = burnin,
alpha=alpha,
delta=delta,
iter=iter,
thin=thin))
theta_combined <- as.data.frame(ldaOut_combined@gamma)
phi_combined <- posterior(ldaOut_combined)$terms
save(theta_combined,file="../output/theta_combined.RData")
save(phi_combined,file="../output/phi_combined.RData")
